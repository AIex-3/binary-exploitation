# Shellcode for Ubuntu 4 (32 Bit) VM

nasm -f elf myshellcode.asm;
sc=$(
    for i in $(objdump -M intel -d myshellcode.o | grep "^ " | cut -f2); do
        echo -n "\x$i";
    done
);
rm myshellcode.o;

sc_file="sc.c";
echo "char code[] = \"$sc\";" > $sc_file;
echo >> $sc_file;
echo "int main(int argc, char** argv) {" >> $sc_file;
echo "    int (*func)();" >> $sc_file;
echo "    func = (int (*)()) code;" >> $sc_file;
echo "    (int)(*func)();" >> $sc_file;
echo "}" >> $sc_file;

gcc -g -Wall $sc_file;
./a.out;
rm a.out;
